<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Theory • wheretowork</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="Theory">
<meta property="og:description" content="wheretowork">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">wheretowork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/wtw_data.html">Data</a>
    </li>
    <li>
      <a href="../../articles/articles/wtw_manual.html">User manual</a>
    </li>
    <li>
      <a href="../../articles/articles/wtw_theory.html">Theory</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NCC-CNC/wheretowork/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="wtw_theory_files/header-attrs-2.19/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Theory</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NCC-CNC/wheretowork/blob/master/vignettes/articles/wtw_theory.Rmd" class="external-link"><code>vignettes/articles/wtw_theory.Rmd</code></a></small>
      <div class="hidden name"><code>wtw_theory.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h1>
<p>This article is intended for users already familiar with the basic
functionality of the Where to Work tool. It is recommended to first read
the <a href="https://ncc-cnc.github.io/wheretowork/articles/articles/wtw_manual.html" class="external-link">official
manual</a> before proceeding.</p>
<p>The goal of this article is to explore some of the underlying
algorithms and behavior of Where to Work, so that users can better
understand and interpret their results. This will also allow users to
develop more advanced workflows to fully utilize the power of the tool
for systematic conservation planning.</p>
<p>For the purpose of this article, we will briefly review the main
components of Where to Work:</p>
<ul>
<li>
<strong>Planning units</strong>: the building blocks for Where to
Work, each planning unit has a value for all the conservation Features
(e.g. species) and Weights (e.g.  human footprint) loaded into the
app.</li>
<li>
<strong>Goals</strong>: the amount of each conservation Theme or
Feature that needs to be captured in the solution (e.g. 20% of a species
range).</li>
<li>
<strong>Includes</strong>: any planning units that should be
locked-in to the solution.</li>
<li>
<strong>Excludes</strong>: any planning units that should be
locked-out of the solution.</li>
<li>
<strong>Area budget</strong>: an optional cap on the number of
planning units that can be used in a solution.</li>
<li>
<strong>Weights</strong>: secondary objectives whereby if two
solutions meet the same Goals, the solution satisfying the Weights
should be preferred.</li>
</ul>
<p>We can think of the combination of planning units, Goals, Weights,
Includes, Excludes and area budget as defining a specific Where to Work
scenario which we will refer to as a <code>conservation problem</code>.
The goal of Where to Work is to solve the
<code>conservation problem</code> by finding the optimal combination of
planning units that meet all the Goals while accounting for any Weights,
Includes and Excludes. If an area budget is defined, then Where to Work
attempts to find the best solution to the
<code>conservation problem</code> using the number of planning units it
has available based on the area budget.</p>
<p>The underlying software running the Where to Work algorithms is an R
package named <a href="https://prioritizr.net/index.html" class="external-link"><strong>prioritizr</strong></a>.
prioritizr is a powerful coding tool for finding the optimal solution
for complex <code>conservation problems</code>. Where to Work can be
thought of as one implementation of prioritizr, it provides some of the
most common prioritizr functionality in a user accessible online
application, but there are many more advanced features in prioritizr
that are not available in Where to Work.</p>
<p>We will provide links to the <a href="https://prioritizr.net/" class="external-link">prioritizr documentation</a> at various
points in this article for readers interested in learning more.</p>
</div>
<div id="planning-units" class="section level1">
<h1 class="hasAnchor">
<a href="#planning-units" class="anchor" aria-hidden="true"></a>Planning Units</h1>
<p>Planning units for Where to Work can either be square cells of equal
size (i.e. a raster layer), or a combination of polygons of any shape
and size (i.e. a shapefile). The data preparation for Where to Work
involves summarizing all of the Themes, Weights, Includes and Excludes
in each planning unit. More information on this can be found in the <a href="https://ncc-cnc.github.io/wheretowork/articles/articles/wtw_data.html" class="external-link">data
article</a> and in the <a href="https://github.com/NCC-CNC/wtw-data-prep" class="external-link">wtw-data-prep</a> github
repo.</p>
</div>
<div id="theme-goals" class="section level1">
<h1 class="hasAnchor">
<a href="#theme-goals" class="anchor" aria-hidden="true"></a>Theme Goals</h1>
<p>Setting Theme Goals is the first step in a Where to Work project.
Goals are set as % values that get translated into a numeric Goal within
Where to Work. Where to Work will try and meet the Goal by ensuring that
the planning unit values in the solution exceed the numeric Goal. The
numeric Goal for a Feature is the calculated as:</p>
<p><code>numeric Goal = sum of all values in all planning units * (1 / Goal %)</code></p>
<p>Typically, Themes represent the spatial extent of a conservation
feature (e.g. a species), so the numeric Goal will be an area. Where to
Work doesn’t actually care what the units are though, it simply
calculates the numeric Goal based on the values in the planning
units.</p>
<p>This is important to know when preparing data and setting Goals. The
planning unit values need to be numeric so that they can be summed
together across planning units. It doesn’t make sense to have
categorical or ordinal data in Where to Work for example because the
values cannot be summed for Goal-setting. A land cover map representing
forested and grassland areas for example would need to be separated out
into two individual Themes where the planning unit values represent the
area of each land cover type within the planning unit. See the <a href="https://ncc-cnc.github.io/wheretowork/articles/articles/wtw_data.html" class="external-link">data
article</a> for more examples of this.</p>
</div>
<div id="includesexcludes" class="section level1">
<h1 class="hasAnchor">
<a href="#includesexcludes" class="anchor" aria-hidden="true"></a>Includes/Excludes</h1>
<p>Includes and Excludes are simple to understand, they force-in or
block-out planning units from the final solution. They can be a powerful
way of customizing your <code>conservation problem</code>. See the <a href="#advancedworkflows">Advanced workflow</a> section for examples and
the <a href="https://ncc-cnc.github.io/wheretowork/articles/articles/wtw_data.html" class="external-link">data
article</a> for data prep tips.</p>
</div>
<div id="area-budget" class="section level1">
<h1 class="hasAnchor">
<a href="#area-budget" class="anchor" aria-hidden="true"></a>Area-budget</h1>
<p>An area budget can be applied in Where to Work which will restrict
the number of planning units available in a solution. This is common in
target based conservation planning where we often want find the optimal
area to protect if we can only conserve say 30% of the landscape. We
recommend always solving the <code>conservation problem</code> first
using no area budget. This will give a baseline solution which can then
be restricted by applying an area budget (see the <a href="#workflow">Recommended workflow</a> below).</p>
<p>An important point is that <code>conservation problems</code> with
and without an area-budget use different underlying algorithms to
generate a solution. <strong>If no are budget is used, the solution will
meet all Goals using the smallest</strong> <strong>area of planning
units possible.</strong> Once an area budget is applied that is less
than that required to meet all targets, Where to Work needs to decide
how best to meet the Goals it can using the planning units it has
available, recognizing that some Goals will not be met. These different
objectives are discussed more below.</p>
<p>For the purpose of demonstrating these concepts, we will set up a
simple example using some demo data.</p>
<p>We’ll have 6 species, each occupying either one or two of our nine
planning units. For simplicity, the Goal for each species will be 1
planning unit.</p>
<p><img src="figures/theory1.png" width="1152"></p>
<div id="no-area-budget" class="section level3">
<h3 class="hasAnchor">
<a href="#no-area-budget" class="anchor" aria-hidden="true"></a>No area-budget</h3>
<p>If no area budget is set, then Where to Work runs an algorithm that
aims to meet all of the Goals using as little planning unit area as
possible. In our example, since our planning units all have the same
area, it will simply meet the Goals using the fewest number of planning
units.</p>
<p>In the prioritizr world, this algorithm is known as the <a href="https://prioritizr.net/reference/add_min_set_objective.html" class="external-link">min
set objective</a>. It uses a mathematical algorithm to identify the
‘minimum set’ of planning units that meet all the Goals.</p>
<p>In our example, the minimum set solution is the top row of planning
units. This is the only way to represent at least one planning unit of
each species using just three planning units.</p>
<p>The larger the Goals, and the more you have, the more planning units
will be needed to find the minimum set solution. This is worth thinking
about when setting your Goals. If you have a species that covers all
your planning units, and you set a Goal of 50%, your solution will
automatically need to cover at least 50% of the planning units.</p>
<p><img src="figures/theory2.png" width="1152"></p>
</div>
<div id="with-area-budget" class="section level3">
<h3 class="hasAnchor">
<a href="#with-area-budget" class="anchor" aria-hidden="true"></a>With area-budget</h3>
<p>If an area budget is set in Where to Work, it limits the number of
planning units available in the solution. Since Where to Work will not
be able to meet all of the Goals, it has to decide how to allocate the
planning units to get the ‘best’ solution. There are <a href="https://prioritizr.net/reference/objectives.html" class="external-link">different ways
to do this</a>, Where to Work uses a method that minimises the total
Goal shortfall (the prioritizr algorithm for this is called the <a href="https://prioritizr.net/reference/add_min_shortfall_objective.html" class="external-link">min
shortfall objective</a>).</p>
<p>Shortfall is the proportion of each Goal that has not been met. Note
that using the proportion rather that the actual area standardizes
shortfall across all Goals, so it doesn’t matter how big the original
area Goal was, only the proportion missing counts. If a Goal is met then
its shortfall is zero. If a Goal has no representation in the solution,
then it’s shortfall is 1.</p>
<p>The algorithm sums all of the shortfalls while searching for a
solution, and the optimal solution will be the one that has the lowest
total shortfall value. In practice, this algorithm does a good job of
passing Goals while maintaining a balanced amount of the missing Goals.
In general, the missed Goals tend to be fairly evenly distributed
throughout the planning units of the final solution (i.e. the shortfalls
of missed Goals follow a normal distribution).</p>
<p>In our example, if we assign Where to Work a budget of two planning
units, the best solution that minimises overall shortfall is to select
two planning units from the top row. The best we can do with two
planning units is to fully meet three Goals, and fully miss two
goals.</p>
<p><img src="figures/theory3.png" width="1152"></p>
<p>The calculation of total shortfall for this solution is as
follows:</p>
<pre><code>total shortfall = 
            species 1 shortfall + 
            species 2 shortfall + 
            species 3 shortfall + 
            species 4 shortfall + 
            species 5 shortfall + 
            species 6 shortfall</code></pre>
<p>where the shortfall for a give species is calculated as:</p>
<pre><code>target missing / target</code></pre>
<p>For our solution, species 3 and 6 are the only ones not met, so total
shortfall is calculated as:</p>
<pre><code>(0/1) + (0/1) + (1/1) + (0/1) + (0/1) + (1/1) = 2</code></pre>
</div>
<div id="workflow" class="section level3">
<h3 class="hasAnchor">
<a href="#workflow" class="anchor" aria-hidden="true"></a>Area-budget - recommended workflow</h3>
<p>Solutions using area budgets can show strange patterns as the area
budget approaches and exceeds the minimum set area. The reason for this
is that the if the algorithm meets all the targets but still has some
area budget left, it doesn’t know what to do with it. It will start to
sequentially gather additional planning units to use up the area budget,
leading to strange patterns in the solutions. This is described in more
detail <a href="https://github.com/prioritizr/prioritizr/issues/205" class="external-link">here</a>.</p>
<p><strong>For this reason, it is important that the area budget never
exceeds the amount</strong> <strong>needed to meet all
Goals.</strong></p>
<p>We therefore recommend the following workflow when using area
budgets:</p>
<ol style="list-style-type: decimal">
<li>Develop the <code>conservation problem</code> by setting Goals and
deciding on any Weights, Includes and Excludes.</li>
<li>Run the minimum set (no area budget) solution to find out how many
planning units are needed to meet all Goals. Where to Work will report
the total number and % of planning units in the solution.</li>
<li>Run the area budget solution(s), but do not exceed the values
reported in the minimum set solution. For example, if the minimum set
solution uses 50% of the planning units, do not exceed 50% as an
area-budget. Our testing suggests that keeping area budget 5-10% below
the min set % is good practice.</li>
<li>If the min set solution uses fewer planning units that the area
budget you are interested in, increase your Goals. For example, if you
want to test a 30% area budget for 30x30 planning, but your min set
solution only requires 25% of the planning units to meet all targets,
then you need to make you <code>conservation problem</code> more
difficult by increasing the Goals.</li>
</ol>
</div>
<div id="nestedness" class="section level3">
<h3 class="hasAnchor">
<a href="#nestedness" class="anchor" aria-hidden="true"></a>Area-budget nestedness</h3>
<p>While thinking about area budgets it’s worth discussing nestedness.
There is a general expectation that when using increasingly large area
budgets (e.g. 10%, 20%, 30% etc.) that solutions from lower area budgets
will be nested inside the solutions of larger area budgets. For example,
we might expect the 10% solution to be contained within the 20% solution
and so on.</p>
<p>The thinking here is that the 10% solution must be capturing the
best, most important planning units on the landscape, and so we’d expect
those to also be included in the higher area budget solutions.</p>
<p>This is not always the case, for the important reason that the
prioritizr algorithm does not rank planning units based on how important
they are, rather for a given <code>conservation problem</code> it
returns the optimal solution based on that problems parameters. When the
area budget changes, so does the <code>conservation problem</code>, and
since the objective is to find the most efficient solution that
satisfies the <code>conservation problem</code>, there is no guarantee
that solutions will be nested.</p>
<p>This is actually an intended feature of prioritizr and it means that
Where to Work allows us to solve much more complex and tailored
scenarios. Instead of ranking all planning units based on a simple
metric such as species richness, and then selecting the top 10%, 20%,
30% etc. (which would be nested), we are able to set individual Goals
for hundreds of Features and find the optimal combination of planning
units to meet those Goals. All the planning units in the solution
contribute to meeting the Goals, and if we want to know which planning
units contribute to the most Goals, we can do subsequent analyses to
investigate this (e.g. <a href="https://prioritizr.net/reference/importance.html" class="external-link">prioritizr
importance scores</a>; <a href="https://github.com/NCC-CNC/impact" class="external-link">Resiliency Index tool</a>).</p>
<p>We can demonstrate this non-nested behavior with our example data.
When we calculate the optimal solution using area budgets of one, two
and three planning units, we see that the first solution is not nested
within the others. The reason for this is that with an area budget of
one, we’re trying to meet as many Goals as possible with a very limited
budget. This is a challenge and the best we can do is to meet three
Goals using the bottom left planning unit. As we increase the area
budget, we have more planning units to play with. We can actually find
better solutions by ignoring the bottom left planning unit and focusing
on other planning units where those species also occur (and overlap with
other species).</p>
<p><img src="figures/theory4.png" width="1152"></p>
<p>This is obviously a very simple example and in real world problems we
often have many thousands of planning units and large numbers of Goals.
In our testing, we have found that the non-nested behavior described
here is most apparent at low area budgets (e.g. 10% when the min set
requires 50%). As area budgets increase, the solutions should become
more nested and will converge towards the minimum set solution.</p>
<p>It’s also worth noting that some <code>conservation problems</code>
do produce nested solutions in Where to Work.It really depends on the
distributions of the Features and the Goals of a given problem.</p>
</div>
</div>
<div id="weights" class="section level1">
<h1 class="hasAnchor">
<a href="#weights" class="anchor" aria-hidden="true"></a>Weights</h1>
<p><strong>Update this section after completing <a href="https://github.com/NCC-CNC/wheretowork/issues/329" class="external-link">#329</a></strong></p>
<p>Using Weights in Where to Work can be difficult because there is no
way to know exactly how a Weight will impact your solution. All we know
is that given multiple competing solutions, the one that best satisfies
the Weight requirements will tend to be selected.</p>
<p>It’s possible however that a selected Weight is incompatible with the
primary objective of meeting Goals. This can be confusing when you
select the Weight but it has no impact on the solution. To return to our
simple example, we might add a positive Weight to our
<code>conservation problem</code> that aims to weight solutions towards
areas known to have high connectivity. If the area of high connectivity
does not overlap with any of our species, the Weight will have no impact
on the selected solution. Since the Weight is a secondary objective, it
can only influence the solution if it overlaps with some planning units
that satisfy the Goals.</p>
<p><img src="figures/theory5.png" width="1152"></p>
<p>Given the different algorithms used for area-budget vs. no
area-budget problems in Where to Work, Weights have to be applied
differently in the underlying code. The outcome is the same: solutions
satisfying the Weights will be preferred. To fully understand what Where
to Work is doing we will review the two approaches below (this gets more
technical so feel free to skip this section!).</p>
<div id="weight-with-no-area-budget" class="section level3">
<h3 class="hasAnchor">
<a href="#weight-with-no-area-budget" class="anchor" aria-hidden="true"></a>Weight with no area budget</h3>
<p>In Where to Work, the ‘budget’ being used when gathering planning
units into a solution is the planning unit area (<strong>under min set
it currently defaults to 1 but we should change to area</strong>). For
the minimum set problem we are trying to meet the Goals while minimizing
area. In the prioritizr world, this is referred to as the ‘cost’ of the
planning unit. And in prioritizr, cost does not have to be area, it can
be the literal cost to acquire a planning unit, or any other value
assigned to planning units that governs how costly they are to add to a
solution.</p>
<p>When applying Weights under the minimum set problem in Where to Work,
we take advantage of this to change the cost of planning units based on
the selected Weights. If no Weights are selected, the planning unit cost
is simply the area of the planning unit (<strong>currently defaults to
1</strong>). If Weights are selected, the Weight layers are multiplied
by the selected Weight factor (ranges from -100 to 100), rescaled, and
summed together (when using multiple Weights). (<strong>see #329, need
to explain that Weights should acount for PU area in data prep</strong>)
The result is that planning units with higher values of positive Weights
are assigned lower costs and will be preferred in solutions, and
planning units with higher values for negative Weights are assigned
higher costs and will be avoided.</p>
</div>
<div id="weight-with-area-budget" class="section level3">
<h3 class="hasAnchor">
<a href="#weight-with-area-budget" class="anchor" aria-hidden="true"></a>Weight with area-budget</h3>
<p>When using an area budget, the planning unit ‘cost’ has to be the
actual area of each planning unit. That way Where to Work knows how much
area budget it is using based on the planning units selected. This means
we cannot incorporate the Weights into the planning unit costs as we did
for the minimum set problem.</p>
<p>Instead, the Weights are added as additional Goals to the
<code>conservation problem.</code> The Goal is calculated as the Weight
factor (converted to a proportion) multiplied by the sum of the Weights
values across all planning units. When finding a solution, Where to Work
will try and meet the Weight Goals just like any other Goal, so the
final solution should prefer planning units that contain a larger amount
of the Weight (<strong>note that weights are not currently clipped to
Themes, see #323</strong>).</p>
<p>Note that under both area-budget and non-area-budget scenarios, Where
to Work will report the area of each Weight in the results summary.</p>
</div>
</div>
<div id="optimality-gap" class="section level1">
<h1 class="hasAnchor">
<a href="#optimality-gap" class="anchor" aria-hidden="true"></a>Optimality gap</h1>
<p>When solving <code>conservation problems</code>, prioritizr has a
parameter called the <strong>optimality gap</strong> which determines
how close the returned solution needs to be to the optimal solution. If
the optimality gap is set to 0%, the single best optimal solution will
be returned. This comes with a time penalty since solving to optimality
takes a certain amount of time depending on the complexity of the
problem.</p>
<p>Where to Work sets the optimality gap to 10% for the minimum set
problem and 50% when using an area budget. This allows for much faster
processing and means that the returned solutions will be within 10% or
50% deviance of the optimal solution. The downside is that two Where to
Work runs using the same inputs could return different solutions.</p>
<p>If a user runs the exact same <code>conservation problem</code> twice
in the same Where to Work session, it will cache the solution and simply
return the same solution to save time on the second run. If a user runs
the exact same <code>conservation problem</code> twice in different
Where to Work sessions (i.e. by closing the app in between), it’s
possible that slightly different solutions will be returned due to
optimality gap. The deviance between solutions is usually quite small,
and is mostly noticeable when the problem is relatively simple and has
many equally good solutions that meet the Goals (maybe because there are
a small number of Goals, or Goals are easy to meet). As problems get
more complex by adding more Goals, higher Goals, and adding Includes and
Excludes, the effect of the optimality gap decreases and in most cases
that we have tested, the same solution is returned across different
sessions.</p>
</div>
<div id="advancedworkflows" class="section level1">
<h1 class="hasAnchor">
<a href="#advancedworkflows" class="anchor" aria-hidden="true"></a>Advanced workflows</h1>
<div id="getting-creative-with-includes" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-creative-with-includes" class="anchor" aria-hidden="true"></a>Getting creative with Includes</h3>
<p>Includes allow the user to force a set of planning units into the
solution. This is typically used for including existing protected areas
in the solution since they are already providing protection and
therefore represent a logical starting point for building out a
prioritization.</p>
<p>Includes can however represent any important feature that a user
wants to lock in to a solution. This could be certain planning units
that represent critical habitat that should be the starting point of a
solution (note that in the case of Features, using an Include is the
same as setting a Goal to 100%), or they could represent areas that have
important cultural values that are central to the planning objective and
not merely Goals.</p>
</div>
<div id="forcing-nestedness" class="section level3">
<h3 class="hasAnchor">
<a href="#forcing-nestedness" class="anchor" aria-hidden="true"></a>Forcing nestedness</h3>
<p>Users can take Includes a step further by linking multiple solutions
together, i.e. taking the output of one <em>conservation problem</em>
and using it as an Include for the next. <a href="https://doi.org/10.1038/s41559-021-01528-7" class="external-link">This paper</a>
provides an example of this to force solutions at different area budgets
to be nested within each other. The approach involves running an
area-budget solution at say 10%, then providing that solution as an
Includes in a 20% area-budget solution and so on. This forces the 10%
solution to be the starting point for the 20% problem and ensures all
lower area-budget solutions are nested within higher area-budget
solutions.</p>
<p>We do not necessarily recommend this for a typical prioritization
(due to the reasons highlighted in the <a href="#nestedness">nestedness</a> section above), but we include it here
as an example of how Where to Work is flexible to user needs and
creativity.</p>
</div>
</div>
<div id="further-reading" class="section level1">
<h1 class="hasAnchor">
<a href="#further-reading" class="anchor" aria-hidden="true"></a>Further reading</h1>
<p>More information on the mechanics of Where to Work can be found in
the following resources:</p>
<ul>
<li>A good place to practice and get familiar with some of these
advanced concepts is by using some of the simple built-in projects in
Where to Work.</li>
<li>
<a href="https://prioritizr.net/index.html" class="external-link">prioritizr website</a> -
this has much more detail on the underlying math behind the algorithms.
The <a href="https://prioritizr.net/articles/publication_record.html" class="external-link">publication
record</a> also has many examples of these concepts being applied in
conservation scenarios.</li>
<li>
<a href="https://github.com/NCC-CNC/wheretowork" class="external-link">source code</a> -
the Where to Work source is publicly available on github.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jeffrey O Hanson, Richard Schuster, Joseph Bennett,Jaimie Vincent, Dan Wismer, Marc Edwards.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a>1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
